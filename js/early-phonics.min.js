/*! doorway-early-phonics 19-02-2019 */

function setCookie(e,t,o){var i=new Date;i.setTime(i.getTime()+24*o*60*60*1e3);var n="expires="+i.toUTCString();document.cookie=e+"="+t+";"+n+";path=/"}function getCookie(e){for(var t=e+"=",o=document.cookie.split(";"),i=0;i<o.length;i++){for(var n=o[i];" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(t))return n.substring(t.length,n.length)}return""}function delCookie(e){document.cookie=e+"=; expires=Mon, 01 Jan 1990 00:00:00 UTC; path=/;"}function getKeys(){var e,t=currentImage,o=["qu","ch","th","sh"],n="abcdefghijklmnopqrstuvwxyz".split("");2==checkForBigram(t).length&&gameSounds?(e=[checkForBigram(t)].concat(t.substring(2,t.length).split("").filter(function(e,t,o){return o.indexOf(e)===t})),console.log(e)):e=t.split("").filter(function(e,t,o){return o.indexOf(e)===t});var s=[];for(i=0;i<e.length;i++)s.push(e[i]);for(;s.length<8;)if(gameSounds){var r=Math.random()<.5?n:o,c=r[Math.floor(Math.random()*r.length)];s.includes(c)||s.push(c)}else{c=n[Math.floor(Math.random()*n.length)];s.includes(c)||s.push(c)}var d=shuffle(s),l=0;for(i=0;i<keyboard_res.length;i++)for(j=0;j<4;j++)keyboard_res[i].keys[j].key=d[l],l++}function shuffle(e){for(var t,o,i=e.length;0!==i;)o=Math.floor(Math.random()*i),t=e[i-=1],e[i]=e[o],e[o]=t;return e}function LoadResults(){var e=JSON.parse(sessionStorage.getItem("tries")),t=document.getElementById("resultsTable1").getElementsByTagName("tbody")[0],o=0,n=0;for(i=0;i<e.length;i++){10===i&&(o=0,$("#resultsTable2").show(),t=document.getElementById("resultsTable2").getElementsByTagName("tbody")[0]);var s=t.insertRow(o),r=s.insertCell(0),c=s.insertCell(1),d=s.insertCell(2),l=s.insertCell(3);r.className="score_sheet_star",l.className="score_sheet_star",c.className="text-center",d.className="text-center";var a=document.createElement("IMG"),u=document.createElement("IMG");a.setAttribute("src","resources/icons/scoresheet-star.svg"),u.setAttribute("src","resources/icons/scoresheet-star.svg"),r.appendChild(a),l.appendChild(u);var m=document.createTextNode(e[i][0]);c.appendChild(m);var h=document.createTextNode(e[i][1]);d.appendChild(h),o++,n+=e[i][1]}var p=e.length,g=(p/n*100).toFixed(1);"testing"===getCookie("InputCookie")&&$("#running_total").html("Total = "+g+"% | Words ("+p+") Tries ("+n+")")}var timer,switchIsOn=!1,timeSwitch=2,twoSwitches=!0,gameSounds=!1;function createModel(){gameSounds=!1,$("#dwButtonToOptionsSounds").click(function(){(gameSounds=!0)&&(wordlist=["ant","apple","bed","box","cat","chick","chin","cook","dog","door","egg","elephant","fish","foot","gate","goal","hat","hen","igloo","ill","jam","jug","key","kite","ladder","leg","man","moon","nail","net","octopus","orange","pen","pig","quad","queen","rat","red","shell","ship","sock","sun","tap","tent","thistle","thumb","umbrella","up","van","violin","web","wool","yellow","yoyo","zebra","zip"])})}function onLoad(e,t,o){var n=$(t).find(o);for(i=0;i<n.length;i++)$(n[i]).val&&$(n[i]).val(""),$(n[i]).text&&$(n[i]).text("");for(i=0;i<e.length;i++)$(n[i]).val&&$(n[i]).val(e[i]),$(n[i]).text&&$(n[i]).text(e[i])}function onLoadPage(e,t,o,n){var s=$(t).find(o);for(i=0;i<s.length;i++)i+16*n>e.length-1?$(s[i]).css("visibility","hidden"):($(s[i]).val&&$(s[i]).val(e[i+16*n]),$(s[i]).text&&$(s[i]).text(e[i+16*n]))}function Resizing(){this.onResize=function(){var e=this.aspectDiv.clientWidth;this.oneEm=e/50,this.aspectDiv.style.fontSize=this.oneEm+"px"},this.aspectDiv=document.getElementById("dwAspectDiv"),this.aspectDiv&&(window.addEventListener("resize",this.onResize.bind(this)),this.onResize("no-event"))}function startScanning(){var t;switchIsOn&&(t="restricted"===keyboard_select?[document.getElementsByClassName("zeroRow"),document.getElementsByClassName("twelve columns")[0].children,document.getElementsByClassName("twelve columns")[1].children]:gameSounds?[document.getElementsByClassName("zeroRow"),document.getElementsByClassName("twelve columns")[0].children,document.getElementsByClassName("twelve columns")[1].children,document.getElementsByClassName("twelve columns")[2].children,document.getElementsByClassName("twelve columns")[3].children]:[document.getElementsByClassName("zeroRow"),document.getElementsByClassName("twelve columns")[0].children,document.getElementsByClassName("twelve columns")[1].children,document.getElementsByClassName("twelve columns")[2].children],twoSwitches?twoSwtich(t):document.body.onkeyup=function(e){32===e.keyCode&&oneSwitch(timeSwitch,t)})}function stopScanning(){switchIsOn&&void 0!==timer&&clearTimeout(timer)}function removeSelected(e){for(var t=0;t<e.length;t++)e[t].classList.remove("selected")}function addSelected(e){for(var t=0;t<e.length;t++)e[t].classList.add("selected")}function oneSwitch(o,i){var n=!1,s=0,r=[-1,0];!function e(){var t=1;console.log("check"),document.body.onkeyup=function(e){32===e.keyCode&&(n?(i[r[0]][r[1]].click(),removeSelected(i[r[0]]),r[1]=r[1]-1,t=1.5):(n=!0,s=1,removeSelected(i[r[0]]),r[1]=-1))},-1!==r[0]&&removeSelected(i[r[0]]),-1===r[0]?r[0]++:r[0]!==i.length-1||n?r[1]===i[r[0]].length-1?r[0]===i.length-1?(r[0]=0,r[1]=0,s=0,n=!1):(r[1]=0,n=!1,r[s=0]++):r[s]++:r[0]=0,n?i[r[0]][r[1]].classList.add("selected"):addSelected(i[r[0]]),timer=setTimeout(e,1e3*o*t)}()}function twoSwtich(t){var o=!0,i=-1,n=0;document.body.onkeyup=function(e){32===e.keyCode&&o?(-1!==i&&removeSelected(t[i]),i===t.length-1?i=0:i++,addSelected(t[i])):13===e.keyCode&&o?(o=!1,removeSelected(t[i]),t[i][0].classList.add("selected")):32!==e.keyCode||o?13!==e.keyCode||o||t[i][n].click():(t[i][n].classList.remove("selected"),n===t[i].length-1?(o=!(n=0),addSelected(t[i])):(n++,t[i][n].classList.add("selected")))}}function randomWords(e,t){choices=generateWords(e,t),document.getElementById("nextBtn").hidden=!1,onLoad(choices,"#select","input"),20===e?$("#pills-home , #pills-profile, #pills-profile2, #pills-profile3, #pills-profile4").find("button").prop("disabled",!0):$("#pills-home , #pills-profile, #pills-profile2, #pills-profile3, #pills-profile4").find("button").prop("disabled",!1)}function selectionPageLoaded(){onLoadPage(wordlist,"#pills-home","button",0),onLoadPage(wordlist,"#pills-profile","button",1),onLoadPage(wordlist,"#pills-profile2","button",2),onLoadPage(wordlist,"#pills-profile3","button",3),choices=[],document.getElementById("nextBtn").hidden=!0,$("#option1").click(function(){randomWords(5,wordlist)}),$("#option3").click(function(){randomWords(10,wordlist)}),$("#option2").click(function(){randomWords(20,wordlist)}),$("#pills-home , #pills-profile, #pills-profile2, #pills-profile3, #pills-profile4").find("button").click(function(){tried=$(this).text(),choices.includes(tried)||(choices.push(tried),document.getElementById("nextBtn").hidden=!1,20===choices.length&&$("#pills-home , #pills-profile, #pills-profile2, #pills-profile3, #pills-profile4").find("button").prop("disabled",!0),onLoad(choices,"#select","input"))});var e=0;$("#select").find("a").each(function(){$("#pills-home , #pills-profile, #pills-profile2, #pills-profile3, #pills-profile4").find("button").prop("disabled",!1),$(this).attr("id",e),e+=1}),$("#select").find("a").click(function(){choices.splice($(this).attr("id"),1),onLoad(choices,"#select","input"),$("#pills-home , #pills-profile, #pills-profile2, #pills-profile3, #pills-profile4").find("button").prop("disabled",!1),0===choices.length&&(document.getElementById("nextBtn").hidden=!0)});var t=0;$("#select").find("input").each(function(){$("#pills-home , #pills-profile, #pills-profile2, #pills-profile3, #pills-profile4").find("button").prop("disabled",!1),$(this).attr("id",t),t+=1}),$("#select").find("input").click(function(){choices.splice($(this).attr("id"),1),onLoad(choices,"#select","input"),$("#pills-home , #pills-profile, #pills-profile2, #pills-profile3, #pills-profile4").find("button").prop("disabled",!1),sessionStorage.setItem("choices",choices),0===choices.length&&(document.getElementById("nextBtn").hidden=!0)}),$(".word-button.chosen").on("mousedown",function(e){e.preventDefault(),$(this).addClass("removeWord")}).on("mouseup",function(){$(this).removeClass("removeWord")}),$(".word-button").on("mousedown",function(e){e.preventDefault(),$(this).addClass("selectWord")}).on("mouseup",function(){$(this).removeClass("selectWord")})}function generateWords(e,t){for(var o=[],n=[];n.length<e;){var s=Math.floor(Math.random()*t.length);-1===n.indexOf(s)&&n.push(s)}for(i=0;i<n.length;i++)o.push(t[n[i]]);return o}function changeInfoText(e){var t=document.getElementById("mode_info");"testing"===e?t.innerHTML="Word Hidden":"learning"===e&&(t.innerHTML="Word Shown")}function changeInfoTextKeyboard(e){var t=document.getElementById("scanning_select"),o=document.getElementById("scanning_settings");"scanning"===e&&(t.style.visibility="hidden",o.style.visibility="visible")}function changeInfoTextSwitch(e){var t=document.getElementById("switch_info");"one"===e?t.innerHTML="Press switch or space to select.":"two"===e&&(t.innerHTML="Press left switch or space to move and right switch or enter to select.")}var currentImage,keyboard_select="restricted",mode_select="testing",wordlist=(switchIsOn=!1,timeSwitch=2,twoSwitches=!0,[""]);function chooseWordList(){document.getElementById("words_input").checked?(wordlist=["bag","bed","bin","box","can","cap","cat","dog","fan","fox","hat","hen","jam","jug","leg","man","map","men","mug","net","pan","peg","pen","pig","rat","red","sun","tap","ten","van","web","zip"],setCookie("GameTypeCookie","words_input",2),$("#activity_info").html("(CVC words)")):document.getElementById("blends_input").checked?(wordlist=["ant","belt","brush","bulb","clap","crab","desk","drum","fist","flag","flask","frog","gift","golf","green","hand","lamp","milk","nest","plug","pram","raft","shelf","spoon","stamp","stop","string","swim","swing","tent","tree"],setCookie("GameTypeCookie","blends_input",2),$("#activity_info").html("(words with adjacent consonants)")):document.getElementById("digraphs_input").checked?(wordlist=["bath","bee","book","boot","chin","cook","feet","fish","food","foot","good","heel","hood","hoof","hook","jeep","king","loop","moon","path","peek","peel","pool","queen","ring","roof","ship","string","swing","weed","wood","wool"],setCookie("GameTypeCookie","digraphs_input",2),$("#activity_info").html("(ee, oo, th, ch, sh, ng)")):document.getElementById("moredigraphs_input").checked?(wordlist=["car","chain","chick","cloud","coat","coin","cue","dart","egg","fork","goat","hair","horn","ill","jar","kerb","mouth","nail","oil","pie","pink","rain","road","shark","shell","snail","sock","star","tail","tank","tie","train"],setCookie("GameTypeCookie","moredigraphs_input",2),$("#activity_info").html("(other digraphs)")):(wordlist=[""],setCookie("GameTypeCookie","",2))}function getSettingsValues(){input_cookie_in=getCookie("InputCookie"),""!==input_cookie_in?(mode_select=input_cookie_in,$(".input_mode[value="+input_cookie_in+"]").prop("checked",!0),"learning"===input_cookie_in?$("#mode_info").html("(Words shown)"):$("#mode_info").html("(Words hidden)")):setCookie("InputCookie",$(".input_mode").attr("value"),1),key_cookie_in=getCookie("KeyboardCookie"),""!==key_cookie_in?(keyboard_select=key_cookie_in,$(".keyboard_mode[value="+key_cookie_in+"]").prop("checked",!0),"restricted"===key_cookie_in&&$("#keyboard_info").html("(Fewer keys)")):keyboard_select="standard"===$(".keyboard_mode:checked").val()?"standard":"restricted",game_type_cookie=getCookie("GameTypeCookie"),""===game_type_cookie||gameSounds?gameSounds||chooseWordList():($("#"+game_type_cookie).prop("checked",!0),chooseWordList())}function demoSettings(){$(".input_mode").click(function(){var e=$(this).attr("value");"testing"===e?$("#mode_info").html("(Words hidden)"):"learning"===e&&$("#mode_info").html("(Words shown)"),setCookie("InputCookie",e,1)}),$(".keyboard_mode").click(function(){var e=$(this).attr("value");"standard"===e?($("#keyboard_info").html("(Standard keyboard with all keys)"),keyboard_select="standard"):"restricted"===e&&($("#keyboard_info").html("(Fewer keys)"),keyboard_select="restricted"),setCookie("KeyboardCookie",e,1)}),$(".switch_mode").click(function(){var e=$(this).attr("value");"true"===e?($(".switch_num_div").show(),$("#radio-switches-2").prop("checked",!0),switchIsOn=!0,twoSwtiches=!0):"false"===e&&($(".switch_num_div").hide(),$(".switch_time_div").hide(),$("#radio-switches-2").prop("checked",!1),$("#time-switches-1").prop("checked",!1),$("#time-switches-2").prop("checked",!1),$("#time-switches-3").prop("checked",!1),switchIsOn=!1,twoSwtiches=!1)}),$(".switch_number").click(function(){var e=$(this).attr("value");"1"===e?($(".switch_time_div").show(),$("#time-switches-2").prop("checked",!0),twoSwitches=!1,timeSwitch=2):"2"===e&&($(".switch_time_div").hide(),$("#time-switches-1").prop("checked",!1),$("#time-switches-2").prop("checked",!1),$("#time-switches-3").prop("checked",!1),twoSwitches=!0,timeSwitch=null)}),$(".switch_time").click(function(){var e=$(this).attr("value");"1s"===e?($("#time-switches-1").prop("checked",!0),$("#time-switches-2").prop("checked",!1),$("#time-switches-3").prop("checked",!1),timeSwitch=1):"2s"===e?($("#time-switches-2").prop("checked",!0),$("#time-switches-1").prop("checked",!1),$("#time-switches-3").prop("checked",!1),timeSwitch=2):"3s"===e&&($("#time-switches-3").prop("checked",!0),$("#time-switches-1").prop("checked",!1),$("#time-switches-2").prop("checked",!1),timeSwitch=3)}),$("#game_type").click(function(){chooseWordList()})}function isMobileDevice(){return!!/Android|webOS|iPhone|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(navigator.userAgent)}function checkForBigram(e){for(var t in keyboard_first_sounds[0].keys){if(keyboard_first_sounds[0].keys[t].key===e.substring(0,2))return e.substring(0,2)}return e.substring(0,1)}function StartGame(i,n){document.getElementById("nextBtn").hidden=!0;var s=document.getElementById("word-audio"),r=document.getElementById("correct-audio"),c=document.getElementById("sound-audio"),d=document.getElementById("modal");currentImage=choices.pop(),sessionStorage.setItem("choices",choices),n=void 0===i&&void 0===n?(i=new Array(choices.length),0):(i=i,n);var l=function(){-1!==s.src.indexOf("resources/sounds/spelltheword.mp3")&&(s.src="resources/sounds/"+currentImage+".mp3",s.play()),gameSounds&&(-1!==s.src.indexOf("resources/sounds/whatdoes.mp3")?(s.src="resources/sounds/"+currentImage+".mp3",s.play()):-1===s.src.indexOf("resources/sounds/startwith.mp3")?(s.src="resources/sounds/startwith.mp3",s.play()):(s.src="resources/sounds/"+currentImage+".mp3",s.removeEventListener("ended",l)))};if(document.getElementById("img-random").src="resources/images/"+currentImage+".svg",s.src=gameSounds?"resources/sounds/whatdoes.mp3":"resources/sounds/spelltheword.mp3",s.addEventListener("ended",l),s.play(),"learning"===getCookie("InputCookie"))if(gameSounds){var e=checkForBigram(currentImage),t=currentImage.substring(e.length);document.getElementById("word-text").innerHTML='<span class="blue">'+e+"</span>"+t}else document.getElementById("word-text").innerHTML=currentImage;else $("#spell-word").css("margin-top","1.5em");document.getElementById("check-button").onclick=function(){var e=currentImage;if(gameSounds&&(e=checkForBigram(currentImage),console.log(e)),inputToCheck=document.getElementById("write").value,inputToCheck===e)if(document.getElementById("write").value="",void 0===i[n]?i[n]=[currentImage,1]:i[n][1]++,n++,0<choices.length)if(stopScanning(),s.removeEventListener("ended",l),d.innerHTML="Correct!",d.style.display="block",correctAudioOnEnded=function(){d.style.display="none",StartGame(i,n),LoadKeyboard(),startScanning(),r.removeEventListener("ended",correctAudioOnEnded)},r.addEventListener("ended",correctAudioOnEnded),gameSounds){var t=e,o=currentImage;soundAudioOnEnded=function(){-1!==c.src.indexOf("resources/sounds/"+t+".mp3")?(c.src="resources/sounds/"+o+".mp3",c.play()):(c.removeEventListener("ended",soundAudioOnEnded),r.play())},c.src="resources/sounds/"+t+".mp3",c.addEventListener("ended",soundAudioOnEnded),c.play()}else r.play();else if(stopScanning(),sessionStorage.setItem("tries",JSON.stringify(i)),d.innerHTML="Correct!",d.style.display="block",correctAudioOnEnded=function(){d.style.display="none",r.removeEventListener("ended",correctAudioOnEnded),window.LoadResultsPage()},r.addEventListener("ended",correctAudioOnEnded),gameSounds){t=e,o=currentImage;soundAudioOnEnded=function(){-1!==c.src.indexOf("resources/sounds/"+t+".mp3")?(c.src="resources/sounds/"+o+".mp3",c.play()):(c.removeEventListener("ended",soundAudioOnEnded),r.play())},c.src="resources/sounds/"+t+".mp3",c.addEventListener("ended",soundAudioOnEnded),c.play()}else r.play();else stopScanning(),startScanning(),d.innerHTML="Try again!",d.style.display="block",setTimeout(function(){d.style.display="none",$("#write").val("")},1e3),void 0===i[n]?i[n]=[currentImage,1]:i[n][1]++},$("#write").focus(function(){isMobileDevice()&&$(".keyboard").hide()}),$("#write").focusout(function(){isMobileDevice()&&$(".keyboard").show()})}